(this["webpackJsonpsports-fista-frontend"]=this["webpackJsonpsports-fista-frontend"]||[]).push([[0],{26:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(17),o=n.n(a),i=n(2),r=(n(26),n(8)),u="http://localhost:8000",l={getEvents:function(e){return fetch(u+"/event/page/"+e).then((function(e){return e.json()}))},logIn:function(e,t){var n={username:e,password:t};return fetch(u+"/users/log-in",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()}))},signUp:function(e,t){var n={username:e,password:t};return fetch(u+"/users/sign-up",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()}))},createEvent:function(e,t,n,c){var s=localStorage.getItem("auth"),a={title:e,desc:t,about:n,images:c};return fetch(u+"/event/",{method:"POST",headers:{"Content-type":"application/json",auth:s},body:JSON.stringify(a)}).then((function(e){return e.json()}))},getSingleEvent:function(e){return fetch(u+"/event/"+e).then((function(e){return e.json()}))},submitComment:function(e,t){var n=localStorage.getItem("auth"),c={desc:e,event:t};return fetch(u+"/comment/",{method:"POST",headers:{"Content-type":"application/json",auth:n},body:JSON.stringify(c)}).then((function(e){return e.json()}))},getCurrentUser:function(){return fetch(u+"/users/get-current-user",{headers:{auth:localStorage.getItem("auth")}}).then((function(e){return e.json()}))},uploadEventImage:function(e){var t=new FormData;t.append("image",e);var n=localStorage.getItem("auth");return fetch(u+"/event/upload-event-image/",{method:"POST",headers:{auth:n},body:t}).then((function(e){return e.json()}))}},j=n(0),h=function(e){var t=Object(c.useState)(null),n=Object(i.a)(t,2),s=n[0],a=n[1],o=Object(c.useState)(0),u=Object(i.a)(o,2),h=u[0],b=u[1];return Object(c.useEffect)((function(){l.getCurrentUser().then((function(e){a(e)}))}),[h,e.refresh]),Object(j.jsxs)("div",{className:"navbar",children:[Object(j.jsx)(r.b,{className:"title no-link",to:"/",children:Object(j.jsx)("div",{children:"Sports-Fista"})}),s&&s.success?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"to-right username",children:s.success.username}),Object(j.jsx)(r.b,{to:"/addevent",className:"btn no-link",children:"+"}),Object(j.jsx)("div",{className:"login btn",onClick:function(){localStorage.setItem("auth",null),b(h+1)},children:"Logout"})]}):Object(j.jsx)(r.b,{to:"/auth",className:"login btn no-link to-right",children:"Login"})]})},b=n(3),d=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(1),o=Object(i.a)(a,2),h=o[0],b=o[1],d=function(e){h+e<=0||b(h+e)};return Object(c.useEffect)((function(){console.log("ran effect"),l.getEvents(h).then((function(e){console.log(e.success.docs[0]),s(e.success.docs)})).catch((function(e){console.log(e)}))}),[h]),n?Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"event-holder",children:function(){var e=[];for(var t in n){var c;e.push(Object(j.jsxs)(r.b,{to:"/event/".concat(n[t]._id),className:"event-card no-link",children:[Object(j.jsx)("img",{className:"event-image",alt:"event img",src:"".concat(u,"/").concat(null===(c=n[t])||void 0===c?void 0:c.images[0])}),Object(j.jsxs)("div",{className:"event-text",children:[Object(j.jsx)("h1",{className:"bold",children:n[t].title}),Object(j.jsx)("p",{className:"event-desc",children:n[t].desc})]})]},n[t]._id))}return e}()}),Object(j.jsxs)("form",{className:"page-controller",children:[Object(j.jsx)("input",{type:"button",value:"prev",className:"btn",onClick:function(){d(-1)}}),Object(j.jsx)("h4",{className:"page",children:h}),Object(j.jsx)("input",{type:"button",value:"next",className:"btn",onClick:function(){d(1)}})]})]}):Object(j.jsx)("h1",{children:"Loading"})},O=function(e){var t=Object(c.useState)(1),n=Object(i.a)(t,2),s=n[0],a=n[1],o=Object(c.useState)(""),r=Object(i.a)(o,2),u=r[0],h=r[1],b=Object(c.useState)(""),d=Object(i.a)(b,2),O=d[0],f=d[1],m=function(e){localStorage.setItem("auth",e)};return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{children:[Object(j.jsx)("h2",{onClick:function(){a(1)},children:"Login"}),Object(j.jsx)("h2",{onClick:function(){a(0)},children:"Sign-up"}),Object(j.jsx)("p",{children:"Username"}),Object(j.jsx)("input",{value:u,onChange:function(e){h(e.target.value)}}),Object(j.jsx)("p",{children:"Password"}),Object(j.jsx)("input",{value:O,onChange:function(e){f(e.target.value)}}),Object(j.jsx)("input",{type:"button",value:"Submit",onClick:function(){s?l.logIn(u,O).then((function(t){console.log(t),t.success&&(m(t.token),e.setRefresh(e.refresh+1),console.log(e.refresh))})):(console.log("sign - up"),l.signUp(u,O).then((function(t){console.log(t),t.success&&(m(t.token),e.setRefresh(e.refresh+1))})))}})]})})},f=n(21),m=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),o=Object(i.a)(a,2),r=o[0],u=o[1],h=Object(c.useState)(""),b=Object(i.a)(h,2),d=b[0],O=b[1],m=Object(c.useState)(""),v=Object(i.a)(m,2),g=v[0],x=v[1],p=Object(c.useState)([]),S=Object(i.a)(p,2),N=S[0],C=S[1];return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{children:[Object(j.jsx)("h1",{children:"Add Event"}),Object(j.jsx)("h4",{children:"Title"}),Object(j.jsx)("input",{type:"text",value:n,onChange:function(e){s(e.target.value)}}),Object(j.jsx)("h4",{children:"Desc"}),Object(j.jsx)("textarea",{value:r,onChange:function(e){u(e.target.value)}}),Object(j.jsx)("h4",{children:"About"}),Object(j.jsx)("textarea",{value:d,onChange:function(e){O(e.target.value)}}),Object(j.jsx)("h4",{children:"Image"}),Object(j.jsx)("input",{type:"file",onChange:function(e){console.log(N),x(e.target.files[0])}}),Object(j.jsx)("input",{type:"button",value:"uploadImage",onClick:function(){l.uploadEventImage(g).then((function(e){console.log("submit event : success : ",e.success),C([].concat(Object(f.a)(N),[e.success]))}))}}),Object(j.jsx)("div",{}),Object(j.jsx)("input",{type:"button",value:"submit",onClick:function(){console.log(N),l.createEvent(n,r,d,N).then((function(e){console.log(e)}))}})]})})},v=n(20),g=n.n(v),x=function(){var e=Object(b.f)().id,t=Object(c.useState)(null),n=Object(i.a)(t,2),s=n[0],a=n[1],o=Object(c.useState)(""),r=Object(i.a)(o,2),h=r[0],d=r[1],O=Object(c.useState)(0),f=Object(i.a)(O,2),m=f[0],v=f[1],x=Object(c.useState)(null),p=Object(i.a)(x,2),S=p[0],N=p[1],C=Object(c.useState)(null),y=Object(i.a)(C,2),k=y[0],E=y[1],I=Object(c.useRef)(null);return Object(c.useEffect)((function(){s&&E(I.current.offsetWidth),window.addEventListener("resize",(function(){s&&I.current&&E(null===I||void 0===I?void 0:I.current.offsetWidth)}))}),[s]),Object(c.useEffect)((function(){l.getSingleEvent(e).then((function(e){var t=e.success.images,n=null;if(t&&t.length>0)for(var c in n=[],t)n.push({url:"".concat(u,"/").concat(t[c])});a(e.success),N(n)}))}),[e,m]),s?Object(j.jsxs)("div",{className:"event-container",children:[Object(j.jsx)("div",{className:"event-top",ref:I,children:S?Object(j.jsx)(g.a,{width:k,height:400,images:S,showBullets:!0,showNavs:!0,autoPlay:!0,slideDuration:2}):null}),Object(j.jsxs)("div",{className:"event-right",children:[Object(j.jsx)("h2",{className:"event-heading",children:s.title}),Object(j.jsx)("p",{className:"event-desc",children:s.desc})]}),Object(j.jsx)("p",{className:"event-desc",children:s.about}),Object(j.jsxs)("form",{className:"event-form",children:[Object(j.jsx)("h3",{children:"Comments"}),Object(j.jsx)("textarea",{placeholder:"Enter your comment here...",value:h,onChange:function(e){d(e.target.value)},className:"event-commentinp"}),Object(j.jsx)("input",{type:"button",value:"Submit",className:"event-comment-submit btn",onClick:function(){l.submitComment(h,e).then((function(){v(m+1)}))}})]}),Object(j.jsx)("div",{className:"comments",children:function(e){var t=[];for(var n in e){var c=e[n];t.push(Object(j.jsxs)("div",{className:"comment-single",children:[Object(j.jsx)("p",{className:"comment-comment",children:c.desc}),Object(j.jsxs)("p",{className:"comment-username",children:[":-",c.userid.username]})]},c._id))}return t.reverse(),t}(s.comments)})]}):Object(j.jsx)("div",{children:"Loading"})};n(33);var p=function(){var e=Object(c.useState)(0),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(j.jsxs)(r.a,{children:[Object(j.jsx)(h,{refresh:n}),Object(j.jsx)(b.c,{children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(b.a,{exact:!0,path:"/",children:Object(j.jsx)(d,{})}),Object(j.jsx)(b.a,{exact:!0,path:"/auth",children:Object(j.jsx)(O,{refresh:n,setRefresh:s})}),Object(j.jsx)(b.a,{exact:!0,path:"/addevent",children:Object(j.jsx)(m,{})}),Object(j.jsx)(b.a,{exact:!0,path:"/event/:id",children:Object(j.jsx)(x,{})})]})})]})};o.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(p,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.15acfcd8.chunk.js.map